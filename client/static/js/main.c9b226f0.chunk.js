(this["webpackJsonpvoicemail-management"]=this["webpackJsonpvoicemail-management"]||[]).push([[0],{106:function(e,t,a){e.exports=a(134)},131:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(7),c=a.n(o),i=a(42),l=a(35),s=a.n(l),u=(a(131),a(91)),d=a(32),g=a(9),m=function(e,t){return{type:e,payload:t}},h=function(e,t){e&&e.push&&e.push(t)},v=a(53),f=a(14),E=a(38),p=a(39),S=a(44),b=a(43),O=a(182),C=a(179),x=a(61),M=a(180),_=a(163),j=a(165),y=a(167),P=a(168),T=Object(_.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),A=function(e){var t=e.title,a=T();return r.a.createElement("div",{className:a.root},r.a.createElement(j.a,{position:"static"},r.a.createElement(y.a,null,r.a.createElement(P.a,{variant:"h6",className:a.title},t))))};A.defaultProps={title:""};var B=A,V=a(169),k=a(171),G=a(172),w=a(173),I=a(136),F=a(174),N=a(175),R=a(176),H=a(177),D=a(184),L=a(170);function U(){var e=Object(v.a)(["\n  min-height: 100px;\n  width: 100%;\n  padding: 20px 0;\n  div {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"]);return U=function(){return e},e}var X=Object(_.a)({table:{minWidth:650}}),z=function(e,t,a,n){return 0===n?r.a.createElement(k.a,null,r.a.createElement(G.a,{colSpan:Object(g.size)(t)},r.a.createElement(J,null,r.a.createElement("div",null,r.a.createElement(L.a,{style:{color:"gray",fontSize:50}})),r.a.createElement("div",null,r.a.createElement("p",null,"No data"))))):e.map((function(e){return r.a.createElement(k.a,{key:e[a]},t.map((function(t,a){var n=a;return r.a.createElement(G.a,{style:t.style||{},key:n},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=t.dataKey,r=t.formatter;return r&&Object(g.isFunction)(r)?r(n,e,a):e[n]}(e,t,a))})))}))},K=function(e){var t=e.columns,a=e.data,n=e.keyId,o=e.loading,c=e.loadingText,i=e.handleChangePage,l=e.handleChangeRowsPerPage,s=e.rowsPerPage,u=e.page,d=e.count,g=X();return o?function(e){return r.a.createElement(J,null,r.a.createElement("div",null,r.a.createElement(V.a,{size:50})),r.a.createElement("div",null,r.a.createElement("p",null,e)))}(c):r.a.createElement(w.a,{component:I.a},r.a.createElement(F.a,{className:g.table,"aria-label":"simple table"},r.a.createElement(N.a,null,r.a.createElement(k.a,null,t.map((function(e,t){var a="".concat(e.text,"+").concat(t);return r.a.createElement(G.a,{key:a},e.text)})))),r.a.createElement(R.a,null,z(a,t,n,d)),r.a.createElement(H.a,null,r.a.createElement(k.a,null,r.a.createElement(D.a,{rowsPerPageOptions:[5,10,25,{label:"All",value:-1}],count:d,rowsPerPage:s,page:u,onChangePage:i,onChangeRowsPerPage:l})))))},W=function(e){Object(S.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).handleChangePage=function(e,t){n.setState({page:t})},n.handleChangeRowsPerPage=function(e){var t=parseInt(e.target.value,10);n.setState({rowsPerPage:t,page:0})},n.getData=function(){var e=n.state,t=e.rowsPerPage,a=e.page,r=n.props.data;return t>0?r.slice(a*t,a*t+t):r},n.state={page:0,rowsPerPage:5},n}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.columns,a=e.keyId,n=e.loading,o=e.loadingText,c=e.data,i=this.state,l=i.page,s=i.rowsPerPage,u=this.getData();return r.a.createElement(K,{columns:t,data:u,count:Object(g.size)(c),keyId:a,loading:n,loadingText:o,handleChangePage:this.handleChangePage,handleChangeRowsPerPage:this.handleChangeRowsPerPage,page:l,rowsPerPage:s})}}]),a}(n.Component);W.defaultProps={loading:!1,loadingText:"Loading ..."};var J=x.a.div(U()),q=W,$=a(189),Q=a(181),Y=a(187),Z=a(4),ee=Object(Z.a)((function(e){return{root:{"label + &":{marginTop:e.spacing(3)}},input:{borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper,border:"1px solid #ced4da",fontSize:16,padding:"10px 26px 10px 12px",transition:e.transitions.create(["border-color","box-shadow"]),"&:focus":{borderRadius:4,borderColor:"#80bdff",boxShadow:"0 0 0 0.2rem rgba(0,123,255,.25)"}}}}))($.a),te=function(e){var t=e.currentValue,a=e.handleChange,n=e.options,o=e.loading,c=e.style;return r.a.createElement(Q.a,{style:c,value:t,onChange:function(e){!o&&a&&a(e)},input:r.a.createElement(ee,null),disabled:o},n.map((function(e){return r.a.createElement(Y.a,{value:e.value,key:Object(g.uniqueId)()},o&&function(e,t){return e===t?r.a.createElement("span",null,r.a.createElement(V.a,{size:15,style:{marginRight:"10px"}})):null}(t,e.value),e.label)})))};te.defaultProps={currentValue:"",loading:!1,style:{}};var ae=te,ne=a(94),re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e.indexOf("@")){var t=e.split("@"),a=Object(ne.a)(t,1),n=a[0];return n}return e},oe=[{label:"New",value:"new"},{label:"Saved",value:"saved"},{label:"Deleted",value:"deleted"}],ce=function(e,t){return[{text:"Status",dataKey:"folder",formatter:function(a,n){return function(e,t,a,n){var o=t.folder,c=!1;return n&&!Object(g.isEmpty)(n)&&(c=n.loading),r.a.createElement(ae,{currentValue:o,handleChange:function(e){return a(t,e.target.value)},options:oe,loading:c,style:{width:"125px"}})}(0,n,e.handleStatusChange,t[Object(g.get)(n,"media_id")])}},{text:"From",dataKey:"from",formatter:function(e,t){var a=t.from;return re(a)}},{text:"To",dataKey:"to",formatter:function(e,t){var a=t.to;return re(a)}},{text:"Duration",dataKey:"length",formatter:function(e,t){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=new Date(0);t.setSeconds(e);var a=t.toISOString().substr(11,8);return a}(t.length)}}]},ie=function(e){var t=e.data,a=e.loading,n=e.handleStatusChange,o=e.statusChange,c=ce({handleStatusChange:n},o);return r.a.createElement(q,{columns:c,data:t,keyId:"media_id",loading:a})};ie.defaultProps={data:[],loading:!1};var le=ie,se=a(186),ue=a(183),de=function(e){var t=e.children,a=e.variant,n=e.onClose;return r.a.createElement(ue.a,{elevation:6,variant:"filled",severity:a,onClose:n},t)},ge=function(e){var t=e.handleClose,a=e.open,n=e.variant,o=e.content;return r.a.createElement(se.a,{open:a,autoHideDuration:6e3,onClose:t,anchorOrigin:{vertical:"bottom",horizontal:"left"}},r.a.createElement(de,{onClose:t,variant:n},o))};ge.defaultProps={open:!1,handleClose:function(){},variant:"success",content:r.a.createElement("div",null)},de.defaultProps={children:r.a.createElement("div",null),variant:"success",onClose:function(){}};var me=ge;function he(){var e=Object(v.a)(["\n  height: 50px;\n  margin: 15px 0;\n  display: flex;\n  align-items: center;\n  * {\n    text-transform: none !important;\n  }\n"]);return he=function(){return e},e}var ve={box:{margin:"20px"}},fe=function(e){Object(S.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(E.a)(this,a),(n=t.call(this,e)).handleSnackbarContent=function(e,t){n.setState({snackbar:{type:e,text:t,open:!0}})},n.handleStatusChange=function(e,t){(0,n.props.changeMessageStatus)(Object(g.get)(e,"media_id"),t).then((function(){n.handleSnackbarContent("success","Message status successfully")})).catch((function(){n.handleSnackbarContent("error","Error changing status")}))},n.handleSnackbarClose=function(){n.setState((function(e){var t=e.snackbar;return{snackbar:Object(f.a)({},t,{open:!1})}}))},n.goToRoot=function(){var e=n.props.history;h(e,"/")},n.getHeaderTitle=function(){var e=n.props.currentVoiceMailBox;return e&&e.name?"".concat(e.name," - Messages"):""},n.state={snackbar:{type:"success",text:"",open:!1}},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.fetchMessages,n=t.getVoiceMailBoxes,r=t.setCurrentVoiceMailBox,o=t.match;n().then((function(){var e=Object(g.get)(o.params,"vmBoxId","");return r(e),a()})).then((function(){e.handleSnackbarContent("success","Messages retrieved")})).catch((function(){e.handleSnackbarContent("error","Error retrieving messages")}))}},{key:"render",value:function(){var e=this.state.snackbar,t=this.props,a=t.messages,n=t.loadingFetch,o=t.statusChange,c=this.getHeaderTitle();return r.a.createElement("div",null,r.a.createElement(B,{title:c}),r.a.createElement(O.a,{component:"div",style:ve.box},r.a.createElement(Ee,null,!n&&r.a.createElement(C.a,{onClick:this.goToRoot},r.a.createElement(M.a,null),r.a.createElement("span",null,"Go to VoiceMail Boxes List"))),r.a.createElement(le,{data:a,loading:n,handleStatusChange:this.handleStatusChange,statusChange:o})),r.a.createElement(me,{open:e.open,content:e.text,variant:e.type,handleClose:this.handleSnackbarClose}))}}]),a}(n.Component),Ee=x.a.div(he()),pe=fe,Se=function(e){return function(t,a){var n=a().VoiceMailBoxReducer.vmBoxes;return 0===Object(g.size)(n)||e?(t(m("LOADING_FETCH_VMBOXES")),s.a.get("/api/accounts/vmboxes").then((function(e){t(m("STOP_LOADING_FETCH_VMBOXES"));var a=e.data;if("success"===a.status){var n=Object(g.keyBy)(a.data,"id");return t(m("SUCCESS_FETCH_VMBOXES",n)),Promise.resolve(a.data)}return Promise.reject(new Error("Error: retrieving voicemail boxes"))})).catch((function(e){return t(m("STOP_LOADING_FETCH_VMBOXES")),Promise.reject(e)}))):Promise.resolve()}},be=Object(i.b)((function(e){var t=e.VoiceMailReducer,a=t.messages,n=t.currentVoiceMailBox,r=t.loadingFetch,o=t.statusChange;return{messages:Object(g.values)(a[n.id]),loadingFetch:r,statusChange:o,currentVoiceMailBox:n}}),(function(e){return{fetchMessages:function(){return e((function(e,a){var n=a().VoiceMailReducer,r=n.currentVoiceMailBox,o=n.messages,c=r.id;return 0===Object(g.size)(o[c])||t?(e(m("LOADING_FETCH_MESSAGES")),s.a.get("/api/accounts/vmboxes/".concat(c,"/messages")).then((function(t){var a=Object(g.keyBy)(t.data.data,"media_id");return e(m("SUCCESS_FETCH_MESSAGES",{messages:a,vmBoxId:c})),e(m("STOP_LOADING_FETCH_MESSAGES")),Promise.resolve(o)})).catch((function(t){return e(m("STOP_LOADING_FETCH_MESSAGES")),Promise.reject(t)}))):Promise.resolve()}));var t},getVoiceMailBoxes:function(){return e(Se())},changeMessageStatus:function(t,a){return e(function(e,t){return function(a,n){var r=n().VoiceMailReducer.currentVoiceMailBox.id;return a(m("LOADING_CHANGE_MESSAGE_STATUS",e)),s.a.patch("/api/accounts/vmboxes/".concat(r,"/messages/").concat(e,"/changeStatus"),{status:t}).then((function(t){a(m("STOP_CHANGE_MESSAGE_STATUS",e));var n=t.data;return"success"===n.status?(a(m("SUCCESS_CHANGE_MESSAGE_STATUS",{data:n.data,vmBoxId:r})),Promise.resolve(n.data)):Promise.reject(new Error("Error: chaginng status"))})).catch((function(t){return a(m("STOP_CHANGE_MESSAGE_STATUS",e)),Promise.reject(t)}))}}(t,a))},setCurrentVoiceMailBox:function(t){return e(function(e){return function(t,a){if(e){var n=a().VoiceMailBoxReducer.vmBoxes,r=Object(g.find)(n,(function(t){return t.id===e}));r&&t(m("SET_CURRENT_VOICEMAIL_BOX",r))}}}(t))}}}))(pe),Oe=function(e){var t,a=e.data,n=e.loading,o=e.handleManageAction,c=(t={handleManageAction:o},[{text:"Actions",dataKey:"",style:{width:"100px"},formatter:function(e,a){return r.a.createElement(C.a,{variant:"outlined",color:"secondary",onClick:function(){return t.handleManageAction(a)}},"Manage")}},{text:"Name",dataKey:"name"},{text:"Messages",dataKey:"messages"}]);return r.a.createElement(q,{loading:n,keyId:"id",data:a,columns:c})};Oe.defaultProps={data:[],loading:!1};var Ce=Oe,xe={box:{margin:"20px"}},Me=function(e){Object(S.a)(a,e);var t=Object(b.a)(a);function a(){var e;Object(E.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleManageAction=function(t){if(t){var a=e.props,n=a.history;(0,a.redirectToMessages)(n,t)}},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.getVoiceMailBoxes)()}},{key:"render",value:function(){var e=this.props,t=e.loadingFetch,a=e.vmBoxes;return r.a.createElement("div",null,r.a.createElement(B,{title:"VoiceMail Boxes"}),r.a.createElement(O.a,{component:"div",style:xe.box},r.a.createElement(Ce,{data:a,loading:t,handleManageAction:this.handleManageAction})))}}]),a}(n.Component),_e=Object(i.b)((function(e){return{loadingFetch:e.VoiceMailBoxReducer.loadingFetch,vmBoxes:Object(g.values)(e.VoiceMailBoxReducer.vmBoxes)}}),(function(e){return{getVoiceMailBoxes:function(){return e(Se())},redirectToMessages:function(t,a){return e(function(e,t){return function(a){if(t){var n="/vmboxes/".concat(t.id,"/messages");a(m("SET_CURRENT_VOICEMAIL_BOX",t)),h(e,n)}}}(t,a))}}}))(Me),je=function(){return r.a.createElement("h1",null,"Route Not Found")},ye=function(){return r.a.createElement(u.a,null,r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:_e}),r.a.createElement(d.a,{path:"/vmboxes/:vmBoxId/messages",component:be}),r.a.createElement(d.a,{component:je})))},Pe=a(23),Te=a(71),Ae=(a(93),a(33)),Be={messages:{},loadingFetch:!0,statusChange:{},currentVoiceMailBox:{}},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Be,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;if("SET_CURRENT_VOICEMAIL_BOX"===a)return Object(f.a)({},e,{currentVoiceMailBox:n});if("SUCCESS_FETCH_MESSAGES"===a)return Object(f.a)({},e,{messages:Object(f.a)({},e.messages,Object(Ae.a)({},n.vmBoxId,n.messages))});if("LOADING_FETCH_MESSAGES"===a)return Object(f.a)({},e,{loadingFetch:!0});if("STOP_LOADING_FETCH_MESSAGES"===a)return Object(f.a)({},e,{loadingFetch:!1});if("LOADING_CHANGE_MESSAGE_STATUS"===a)return Object(f.a)({},e,{statusChange:Object(f.a)({},e.statusChange,Object(Ae.a)({},n,{loading:!0}))});if("STOP_CHANGE_MESSAGE_STATUS"===a)return Object(f.a)({},e,{statusChange:Object(f.a)({},e.statusChange,Object(Ae.a)({},n,{loading:!1}))});if("SUCCESS_CHANGE_MESSAGE_STATUS"===a){var r=Object(g.get)(n.data,"media_id");return Object(f.a)({},e,{messages:Object(f.a)({},e.messages,Object(Ae.a)({},n.vmBoxId,Object(f.a)({},e.messages[n.vmBoxId],Object(Ae.a)({},r,n.data))))})}return e},ke={vmBoxes:{},loadingFetch:!1},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ke,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;return"SUCCESS_FETCH_VMBOXES"===a?Object(f.a)({},e,{vmBoxes:n}):"LOADING_FETCH_VMBOXES"===a?Object(f.a)({},e,{loadingFetch:!0}):"STOP_LOADING_FETCH_VMBOXES"===a?Object(f.a)({},e,{loadingFetch:!1}):e},we=Object(Pe.combineReducers)({VoiceMailReducer:Ve,VoiceMailBoxReducer:Ge}),Ie=Object(Pe.createStore)(we,Object(Pe.compose)(Object(Pe.applyMiddleware)(Te.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.defaults.baseURL="",c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:Ie},r.a.createElement(ye,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[106,1,2]]]);
//# sourceMappingURL=main.c9b226f0.chunk.js.map